<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IP Subnet Calculator</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100vh;
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .ip-calculator {
      width: 100%;
      max-width: 600px;
      padding: 15px;
      border: 2px solid #ddd;
      border-radius: 10px;
      background: #fff;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      height: auto;
    }

    .ip-calculator h3 {
      text-align: center;
      margin-bottom: 15px;
    }

    .input-group {
      margin-bottom: 10px;
    }

    .input-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }

    .input-group input,
    .input-group select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
    }

    .calculate-btn {
      padding: 10px;
      background: #00c97f;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
      margin: 15px 0;
    }

    .calculate-btn:hover {
      background: #00a866;
    }

    .results {
      background: #fdfdfd;
      padding: 10px;
      border-radius: 5px;
      border: 1px solid #ddd;
      font-size: 0.95rem;
    }

    .result-row {
      display: flex;
      justify-content: space-between;
      padding: 5px 0;
      border-bottom: 1px solid #eee;
    }

    .result-row:last-child {
      border-bottom: none;
    }

    .result-label {
      font-weight: bold;
    }

    .result-value {
      color: #00c97f;
      font-family: monospace;
    }

    .error {
      color: #d63384;
      background: #f8d7da;
      padding: 8px;
      border-radius: 5px;
      margin: 10px 0;
    }

    @media (max-width: 600px) {
      .ip-calculator {
        border: none;
        padding: 10px;
        height: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="ip-calculator">
    <h3>IP Subnet Calculator</h3>
    <div class="input-group">
      <label for="ipAddress">IP Address:</label>
      <input type="text" id="ipAddress" placeholder="192.168.1.1" value="192.168.1.1">
    </div>
    <div class="input-group">
      <label for="subnetMask">Subnet Mask:</label>
      <select id="subnetMask">
        <option value="24">/24 (255.255.255.0)</option>
        <option value="25">/25 (255.255.255.128)</option>
        <option value="26">/26 (255.255.255.192)</option>
        <option value="27">/27 (255.255.255.224)</option>
        <option value="28">/28 (255.255.255.240)</option>
        <option value="29">/29 (255.255.255.248)</option>
        <option value="30">/30 (255.255.255.252)</option>
        <option value="23">/23 (255.255.254.0)</option>
        <option value="22">/22 (255.255.252.0)</option>
        <option value="21">/21 (255.255.248.0)</option>
        <option value="20">/20 (255.255.240.0)</option>
        <option value="16">/16 (255.255.0.0)</option>
        <option value="8">/8 (255.0.0.0)</option>
      </select>
    </div>
    <button class="calculate-btn" onclick="calculateSubnet()">Calculate Subnet</button>
    <div id="results" class="results" style="display: none;"></div>
    <div id="error" class="error" style="display: none;"></div>
  </div>

  <script>
    function isValidIP(ip) {
      const parts = ip.split('.');
      if (parts.length !== 4) return false;
      for (let part of parts) {
        const num = parseInt(part);
        if (isNaN(num) || num < 0 || num > 255) return false;
      }
      return true;
    }

    function isPrivateIP(ip) {
      const parts = ip.split('.').map(x => parseInt(x));
      const firstOctet = parts[0];
      const secondOctet = parts[1];
      if (firstOctet === 10) return 'Private (Class A)';
      if (firstOctet === 172 && secondOctet >= 16 && secondOctet <= 31) return 'Private (Class B)';
      if (firstOctet === 192 && secondOctet === 168) return 'Private (Class C)';
      if (firstOctet === 169 && secondOctet === 254) return 'Link-Local (APIPA)';
      if (firstOctet === 127) return 'Loopback (localhost)';
      if (firstOctet >= 224 && firstOctet <= 239) return 'Multicast';
      if (firstOctet >= 240) return 'Reserved';
      return 'Public';
    }

    function ipToInt(ip) {
      const parts = ip.split('.').map(x => parseInt(x));
      return (parts[0] << 24) + (parts[1] << 16) + (parts[2] << 8) + parts[3];
    }

    function intToIP(int) {
      return [
        (int >>> 24) & 255,
        (int >>> 16) & 255,
        (int >>> 8) & 255,
        int & 255
      ].join('.');
    }

    function calculateSubnet() {
      const ipInput = document.getElementById('ipAddress').value.trim();
      const cidr = parseInt(document.getElementById('subnetMask').value);
      const resultsDiv = document.getElementById('results');
      const errorDiv = document.getElementById('error');

      resultsDiv.style.display = 'none';
      errorDiv.style.display = 'none';

      if (!isValidIP(ipInput)) {
        errorDiv.textContent = 'Please enter a valid IP address (e.g., 192.168.1.1)';
        errorDiv.style.display = 'block';
        return;
      }

      try {
        const ipInt = ipToInt(ipInput);
        const subnetMaskInt = (0xFFFFFFFF << (32 - cidr)) >>> 0;
        const subnetMask = intToIP(subnetMaskInt);
        const networkInt = ipInt & subnetMaskInt;
        const network = intToIP(networkInt);
        const broadcastInt = networkInt | (0xFFFFFFFF >>> cidr);
        const broadcast = intToIP(broadcastInt);
        const firstHost = intToIP(networkInt + 1);
        const lastHost = intToIP(broadcastInt - 1);
        const totalHosts = Math.pow(2, 32 - cidr);
        const usableHosts = totalHosts - 2;
        const wildcardMask = intToIP(0xFFFFFFFF >>> cidr);
        const ipType = isPrivateIP(ipInput);

        resultsDiv.innerHTML = `
          <div class="result-row"><span class="result-label">IP Address Type:</span><span class="result-value">${ipType}</span></div>
          <div class="result-row"><span class="result-label">Network Address:</span><span class="result-value">${network}</span></div>
          <div class="result-row"><span class="result-label">Subnet Mask:</span><span class="result-value">${subnetMask}</span></div>
          <div class="result-row"><span class="result-label">CIDR Notation:</span><span class="result-value">/${cidr}</span></div>
          <div class="result-row"><span class="result-label">Wildcard Mask:</span><span class="result-value">${wildcardMask}</span></div>
          <div class="result-row"><span class="result-label">Broadcast Address:</span><span class="result-value">${broadcast}</span></div>
          <div class="result-row"><span class="result-label">First Host:</span><span class="result-value">${firstHost}</span></div>
          <div class="result-row"><span class="result-label">Last Host:</span><span class="result-value">${lastHost}</span></div>
          <div class="result-row"><span class="result-label">Total Hosts:</span><span class="result-value">${totalHosts.toLocaleString()}</span></div>
          <div class="result-row"><span class="result-label">Usable Hosts:</span><span class="result-value">${usableHosts.toLocaleString()}</span></div>
        `;
        resultsDiv.style.display = 'block';
      } catch (error) {
        errorDiv.textContent = 'Error calculating subnet. Please check your input.';
        errorDiv.style.display = 'block';
      }
    }

    window.onload = function () {
      calculateSubnet();
    };
  </script>
</body>
</html>
